function loadStockList(){var n="/Stock/?handler=Json&sortOrder=Latest",t=$.get(n,function(t){console.log(n+" Loaded");numItems=t.stock.length;localStorage.setItem("stocklist",JSON.stringify(t));getVehicleHPIDetails().then(n=>showStockList(n)).catch(n=>showStockList(n))});t.fail(function(){doErrorModal("Error Loading Form "+formToLoad,"The form at "+n+" returned a server error and could not be loaded")})}function showStockList(){return new Promise(function(n){let i="",u=JSON.parse(localStorage.getItem("stocklist")),t=u.stock,f=curItem,e=curItem+numItemsToShow;var o=new Date,r=new Date;r.setDate(o.getDate()-28);for(let n=f;n<e;n++){let u=n;u>numItems-1&&(u=n-numItems);u<0&&(u=0);let e=new Date(t[u].createdDate),f="";f=e>=r?`<div class="NewStock"><i class="fas fa-star"></i> New</div>`:``;i+=`
                <div class="col-md-4">
                    <div class="card LatestVehicle">
                        <div class="card-img-top">
                            ${f}
                            ${photosHtml(t[u].stocklistImportID,t[u].photo)}
                        </div>
                        <div class="container Details">
                            <div class="row">
                                <div class="col-xl-8 col-6">
                                    <a class="OpenVehicle" href="#" data-toggle="modal" data-id="${t[u].stocklistImportID}" data-target="#vehicleModal" data-loading-text="${t[u].make} ${t[u].model} ${t[u].derivative} (${t[u].manufacturedYear})"><h2>${t[u].make} ${t[u].model}</h2></a>
                                </div>
                                <div class="col-xl-4 col-6 text-right Price">
                                    <span>${getPrice(t[u].price)}</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <a class="OpenVehicle" href="#" data-toggle="modal" data-id="${t[u].stocklistImportID}" data-target="#vehicleModal" data-loading-text="${t[u].make} ${t[u].model} ${t[u].derivative} (${t[u].manufacturedYear})"><h3>${t[u].derivative} (${t[u].manufacturedYear})</h3></a>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-6">
                                    <i class="fas fa-cogs"></i> ${t[u].transmission}
                                </div>
                                <div class="col-6">
                                    <i class="fas fa-tachometer-alt"></i> ${t[u].mileage}${t[u].mileageUnit}
                                </div>
                                <div class="col-6">
                                    <i class="fas fa-palette"></i> ${t[u].colour}
                                </div>
                                <div class="col-6">
                                    <i class="fas fa-gas-pump"></i> ${t[u].fuelType}
                                </div>
                                <div class="col-6">
                                    <i class="fas fa-tools"></i> ${t[u].engineSize}${t[u].engineSizeUnit}
                                </div>
                                <div class="col-6">
                                    <i class="fas fa-door-closed"></i> ${t[u].doors}
                                </div>
                                <div class="col-12">
                                    <i class="fas fa-users"></i> ${getPreviousOwners(t[u].previousOwners)}
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col text-center MoreDetails">
                                <a class="OpenVehicle" href="#" data-toggle="modal" data-id="${t[u].stocklistImportID}" data-target="#vehicleModal" data-loading-text="${t[u].make} ${t[u].model} ${t[u].derivative} (${t[u].manufacturedYear})">
                                    ${financeFromHtml(t[n].stocklistImportID,t[n].FinanceProductResults)}
                                </a>
                            </div>
                        </div>
                    </div>
                </div>`}$("#LatestVehicleArea").html(i);listLoadedFunctions();n("Latest stock loaded")})}function advanceStockList(n){n==="R"?(curItem-=1,curItem<0&&(curItem=numItems-1)):(curItem+=1,curItem>numItems-1&&(curItem=0));showStockList()}function animateStockList(){setTimeout(function(){latestCarControlsHover===!1&&advanceStockList("F");animateStockList()},1e4)}function listLoadedFunctions(){$(function(){return $(".carousel.lazy").on("slide.bs.carousel",function(n){var t;t=$(n.relatedTarget).find("img[data-src]");t.attr("src",t.data("src"));t.removeAttr("data-src")})});$(".OpenVehicle").click(function(){let n=$(this).attr("data-id"),t=$(this).attr("data-loading-text");$("#vehicleID").val(n);$("#modalTitleID").val(t)})}var iVendi={terms:"60",mileages:"10000",deposits:"0"};loadStockList();animateStockList();var curItem=0,numItems=0,numItemsToShow=3,latestCarControlsHover=!1;$(".LatestCarControls").mouseenter(function(){latestCarControlsHover=!0});$(".LatestCarControls").mouseleave(function(){latestCarControlsHover=!1});$("#LatestVehicleArea").mouseenter(function(){latestCarControlsHover=!0});$("#LatestVehicleArea").mouseleave(function(){latestCarControlsHover=!1});$(".LatestCarControls").click(function(){let n=$(this).attr("aria-label");advanceStockList(n)});