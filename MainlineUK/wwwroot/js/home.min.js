function loadStockList(){var n="/Stock/?handler=Json&sortOrder=Latest",t=$.get(n,function(t){console.log(n+" Loaded");numItems=t.stock.length;localStorage.setItem("stocklist",JSON.stringify(t));showStockList()});t.fail(function(){doErrorModal("Error Loading Form "+formToLoad,"The form at "+n+" returned a server error and could not be loaded")})}function showStockList(){let t="",r=JSON.parse(localStorage.getItem("stocklist")),n=r.stock,u=curItem,f=curItem+numItemsToShow;var e=new Date,i=new Date;i.setDate(e.getDate()-28);for(let r=u;r<f;r++){let u=r;u>numItems-1&&(u=r-numItems);u<0&&(u=0);let e=new Date(n[u].createdDate),f="";f=e>=i?`<div class="NewStock"><i class="fas fa-star"></i> New</div>`:``;t+=`
            <div class="col-md-4">
                <div class="card LatestVehicle">
                    <div class="card-img-top">
                        ${f}
                        ${photosHtml(n[u].stocklistImportID,n[u].photo)}
                    </div>
                    <div class="container Details">
                        <div class="row">
                            <div class="col-xl-8 col-6">
                                <h2>${n[u].make} ${n[u].model}</h2>
                            </div>
                            <div class="col-xl-4 col-6 text-right Price">
                                <span>${getPrice(n[u].price)}</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <h3>${n[u].derivative} (${n[u].manufacturedYear})</h3>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-6">
                                <i class="fas fa-cogs"></i> ${n[u].transmission}
                            </div>
                            <div class="col-6">
                                <i class="fas fa-tachometer-alt"></i> ${n[u].mileage}${n[u].mileageUnit}
                            </div>
                            <div class="col-6">
                                <i class="fas fa-palette"></i> ${n[u].colour}
                            </div>
                            <div class="col-6">
                                <i class="fas fa-gas-pump"></i> ${n[u].fuelType}
                            </div>
                            <div class="col-6">
                                <i class="fas fa-tools"></i> ${n[u].engineSize}${n[u].engineSizeUnit}
                            </div>
                            <div class="col-6">
                                <i class="fas fa-door-closed"></i> ${n[u].doors}
                            </div>
                            <div class="col-12">
                                <i class="fas fa-users"></i> ${getPreviousOwners(n[u].previousOwners)}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col text-center MoreDetails">
                            <a href="#">Finance from xxx p/m</a>
                        </div>
                    </div>
                </div>
            </div>`}$("#LatestVehicleArea").html(t);listLoadedFunctions()}function advanceStockList(n){n==="R"?(curItem-=1,curItem<0&&(curItem=numItems-1)):(curItem+=1,curItem>numItems-1&&(curItem=0));showStockList()}function animateStockList(){setTimeout(function(){latestCarControlsHover===!1&&advanceStockList("F");animateStockList()},5e3)}function listLoadedFunctions(){$(function(){return $(".carousel.lazy").on("slide.bs.carousel",function(n){var t;t=$(n.relatedTarget).find("img[data-src]");t.attr("src",t.data("src"));t.removeAttr("data-src")})});$(".OpenVehicle").click(function(){let n=$(this).attr("data-id"),t=$(this).attr("data-loading-text");$("#vehicleID").val(n);$("#modalTitleID").val(t)})}loadStockList();animateStockList();var curItem=0,numItems=0,numItemsToShow=3,latestCarControlsHover=!1;$(".LatestCarControls").mouseenter(function(){latestCarControlsHover=!0});$(".LatestCarControls").mouseleave(function(){latestCarControlsHover=!1});$("#LatestVehicleArea").mouseenter(function(){latestCarControlsHover=!0});$("#LatestVehicleArea").mouseleave(function(){latestCarControlsHover=!1});$(".LatestCarControls").click(function(){let n=$(this).attr("aria-label");advanceStockList(n)});