function loadStockList(){var n="/Stock/?handler=Json",t=$.get(n,function(t){console.log(n+" Loaded");numItems=t.stock.length;numPages=Math.ceil(numItems/numItemsPerPage);localStorage.setItem("stocklist",JSON.stringify(t));filterStocklist()});t.fail(function(){doErrorModal("Error Loading Form "+formToLoad,"The form at "+n+" returned a server error and could not be loaded")})}function filterStocklist(){curPage=1;let f=JSON.parse(localStorage.getItem("stocklist")),n=f.stock,r=$("#FilterMake").val(),u=$("#FilterModel").val(),t=$("#FilterMinPrice").val(),i=$("#FilterMaxPrice").val(),e=$("#FilterMinBudget").val(),o=$("#FilterMaxBudget").val();r.length>1&&(n=n.filter(n=>n.make===r));u.length>1&&(n=n.filter(n=>n.model===u));t.length>1&&(t=t.replace("£",""),t=t.replace(",",""),n=n.filter(n=>n.price>=t));i.length>1&&(i=i.replace("£",""),i=i.replace(",",""),n=n.filter(n=>n.price<=i));numItems=n.length;numPages=Math.ceil(numItems/numItemsPerPage);localStorage.setItem("filteredStocklist",JSON.stringify(n));displayStockList()}function displayStockList(){let n=JSON.parse(localStorage.getItem("filteredStocklist")),i=numItemsPerPage*curPage-numItemsPerPage,r=numItemsPerPage*curPage,t="";for(let u=i;u<=r;u++){if(u>=numItems)break;t+=`
            <div class="row">
                <div class="col">
                    <div class="row Vehicle">
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col">
                                    ${photosHtml(n[u].stocklistImportID,n[u].photo)}
                                </div>
                            </div>
                            <div class="row">
                                <div class="col text-center MoreDetails">
                                    <a href="#">More Details &gt;</a>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="row">
                                <div class="col-lg-9">
                                    <h2>${n[u].make} ${n[u].model}</h2>
                                    <h3>${n[u].derivative} (${n[u].manufacturedYear})</h3>
                                </div>
                                <div class="col-lg-3 text-right Price">
                                    <span>${getPrice(n[u].price)}</span>
                                </div>
                            </div>
                            <hr />
                            <div class="row">
                                <div class="col">
                                    ${getAdvert(n[u].advertDescription1)}
                                </div>
                            </div>
                            <div class="row Spacer">
                                <div class="col-md-3 col-sm-4 col-6">
                                    <i class="fas fa-cogs"></i> ${n[u].transmission}
                                </div>
                                <div class="col-md-3 col-sm-4 col-6">
                                    <i class="fas fa-tachometer-alt"></i> ${n[u].mileage}${n[u].mileageUnit}
                                </div>
                                <div class="col-md-3 col-sm-4 col-6">
                                    <i class="fas fa-palette"></i> ${n[u].colour}
                                </div>
                                <div class="col-md-3 col-sm-4 col-6">
                                    <i class="fas fa-gas-pump"></i> ${n[u].fuelType}
                                </div>
                                <div class="col-md-3 col-sm-4 col-6">
                                    <i class="fas fa-tools"></i> ${n[u].engineSize}${n[u].engineSizeUnit}
                                </div>
                                <div class="col-md-3 col-sm-4 col-6">
                                    <i class="fas fa-door-closed"></i> ${n[u].doors}
                                </div>
                                <div class="col-md-6 col-sm-8 col-12">
                                    <i class="fas fa-users"></i> ${getPreviousOwners(n[u].previousOwners)}
                                </div>
                            </div>
                            <div class="row Spacer">
                                <div class="col text-right">
                                    <button type="button" class="btn btn-primary">Apply</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>`}t+=`
        <div class="row Spacer">
            <div class="alert alert-secondary col" role="alert">
                ${pagesHtml(numPages,curPage,numPagesEitherSide)}
            </div>
        </div>`;$("#VehicleArea").html(t);listLoadedFunctions()}function listLoadedFunctions(){$(function(){return $(".carousel.lazy").on("slide.bs.carousel",function(n){var t;t=$(n.relatedTarget).find("img[data-src]");t.attr("src",t.data("src"));t.removeAttr("data-src")})});$(".PageNav").click(function(){curPage=$(this).attr("aria-label");displayStockList()})}$(".Filters .Buttons").hide();loadStockList();var numItemsPerPage=10,numPagesEitherSide=3,numPages=1,curPage=1,numItems=1;pricesSlider.on("change",function(){filterStocklist()});budgetSlider.on("change",function(){filterStocklist()});$("#SearchForm select").change(function(){filterStocklist()});