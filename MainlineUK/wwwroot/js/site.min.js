function loadStockList(){var n=$("#CurrentSortID").val();loadList("CarListArea","Stock","StockList",n,"","")}function loadList(n,t,i,r,u,f){var e;e=r.length>0&&f.length>0?"/"+t+"/Index/"+r+"/"+f+"/"+u+" #"+i:r.length>0?"/"+t+"/Index/"+r+"/"+u+" #"+i:"/"+t+"/Index/"+u+" #"+i;$("#"+n).load(e,function(n,t){t==="error"?doErrorModal("Error Loading "+e,"The list at "+e+" returned a server error and could not be loaded"):(console.log(e+" Loaded"),listLoadedFunctions())})}function listLoadedFunctions(){$(function(){return $(".carousel.lazy").on("slide.bs.carousel",function(n){var t;t=$(n.relatedTarget).find("img[data-src]");t.attr("src",t.data("src"));t.removeAttr("data-src")})});$(".PageNav").click(function(){var n=$(this).attr("aria-label");$("#PageID").val(n);$("#SearchForm").submit()})}function doModal(n,t){console.log(t);html='<div id="dynamicModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="confirm-modal" aria-hidden="true">';html+='<div class="modal-dialog">';html+='<div class="modal-content">';html+='<div class="modal-header">';html+='<h5 class="modal-title" id="customerModalLabel"><i class="fas fa-info-circle"><\/i> '+n+"<\/h5>";html+='<button type="button" class="close" data-dismiss="modal" aria-label="Close">';html+='<span aria-hidden="true">&times;<\/span>';html+="<\/button>";html+="<\/div>";html+='<div class="modal-body">';html+="<p>"+t+"<\/p>";html+="<\/div>";html+='<div class="modal-footer">';html+='<span class="btn btn-primary" data-dismiss="modal">Close<\/span>';html+="<\/div>";html+="<\/div>";html+="<\/div>";html+="<\/div>";$("body").append(html);$("#dynamicModal").modal();$("#dynamicModal").modal("show");$("#dynamicModal").on("hidden.bs.modal",function(){$(this).remove()})}function doErrorModal(n,t){console.log(t);html='<div id="dynamicModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="confirm-modal" aria-hidden="true">';html+='<div class="modal-dialog">';html+='<div class="modal-content">';html+='<div class="modal-header">';html+='<h5 class="modal-title" id="customerModalLabel"><i class="fas fa-exclamation-triangle"><\/i> '+n+"<\/h5>";html+='<button type="button" class="close" data-dismiss="modal" aria-label="Close">';html+='<span aria-hidden="true">&times;<\/span>';html+="<\/button>";html+="<\/div>";html+='<div class="modal-body">';html+="<p>An unexpected error has occurred which could indicate a defect with the system<\/p>";html+='<div class="alert alert-danger" role="alert">';html+='<i class="fas fa-bug"><\/i> '+t;html+="<\/div>";html+="<\/div>";html+='<div class="modal-footer">';html+='<span class="btn btn-primary" data-dismiss="modal">Close<\/span>';html+="<\/div>";html+="<\/div>";html+="<\/div>";html+="<\/div>";$("body").append(html);$("#dynamicModal").modal();$("#dynamicModal").modal("show");$("#dynamicModal").on("hidden.bs.modal",function(){$(this).remove()});var i=new Audio("/sounds/error.wav");i.play()}function doCrashModal(n){var r=$(n.responseText).find(".stackerror").html()||"Unknown error",t=$(n.responseText).find(".rawExceptionStackTrace").html()||"",i;console.log(t);html='<div id="dynamicModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="confirm-modal" aria-hidden="true">';html+='<div class="modal-dialog">';html+='<div class="modal-content">';html+='<div class="modal-header">';html+='<h5 class="modal-title" id="customerModalLabel"><i class="fas fa-exclamation-triangle"><\/i> An application error has occurred<\/h5>';html+='<button type="button" class="close" data-dismiss="modal" aria-label="Close">';html+='<span aria-hidden="true">&times;<\/span>';html+="<\/button>";html+="<\/div>";html+='<div class="modal-body">';html+="<p>An unexpected error has occurred which could indicate a defect with the system<\/p>";html+='<div class="alert alert-danger" role="alert">';html+='<i class="fas fa-bug"><\/i> '+r;html+="<\/div>";html+='<div class="pre-scrollable small">';html+="<p><code>"+t+"<\/code><\/p>";html+="<\/div>";html+="<\/div>";html+='<div class="modal-footer">';html+='<span class="btn btn-primary" data-dismiss="modal">Close<\/span>';html+="<\/div>";html+="<\/div>";html+="<\/div>";html+="<\/div>";$("body").append(html);$("#dynamicModal").modal();$("#dynamicModal").modal("show");$("#dynamicModal").on("hidden.bs.modal",function(){$(this).remove()});i=new Audio("/sounds/error.wav");i.play()}loadStockList();$("#FilterMake").change(function(){var t=$(this).val(),n=$("#FilterModel");t===""?$("option, optgroup",n).show():(n.val(""),$("optgroup, optgroup > option",n).hide(),$("optgroup[label='"+t+"'], optgroup[label='"+t+"'] > option",n).show())});$("#FilterPriceFrom").change(function(){var n=$(this).val();$("#FilterPriceTo option").each(function(){parseInt($(this).val())<=n?$(this).hide():$(this).show()})});$("#FilterPriceTo").change(function(){var n=$(this).val();$("#FilterPriceFrom option").each(function(){parseInt($(this).val())>=n?$(this).hide():$(this).show()})});$("#SearchForm select").change(function(){$("#PageID").val("1");$("#SearchForm").submit()});$("#SearchForm").submit(function(n){n.preventDefault();var c=$("#CurrentSortID").val(),u=$("#FilterMake").val(),i=$("#FilterModel").val(),f=$("#FilterPriceFrom").val(),e=$("#FilterPriceTo").val(),o=$("#FilterMileage").val(),s=$("#FilterTransmission").val(),h=$("#FilterFuelType").val(),r=$("#FilterBodyType").val(),t="",l=$("#PageID").val();i=i.replace(" ","_");r=r.replace(" ","_");u.length>1&&(t=t+"&make="+u);i.length>1&&(t=t+"&model="+i);f.length>1&&(t=t+"&min_price="+f);e.length>1&&(t=t+"&max_price="+e);o.length>1&&(t=t+"&mileage="+o);s.length>1&&(t=t+"&transmission="+s);h.length>1&&(t=t+"&fuel_Type="+h);r.length>1&&(t=t+"&body_Type="+r);t.length>1&&(t=t.substring(1,t.length),t="?"+t);$("#CarListArea").html($("#LoadingHTML").html());loadList("CarListArea","Stock","StockList",c,t,l)});